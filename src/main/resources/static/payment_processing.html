<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Payment Processing Engine - Java 21</title>
    <link rel="stylesheet" href="css/payment_processing.css" />
</head>
<body>
<div class="header">
    <div>
        <h1>ğŸ’³ Payment Processing Engine <span class="java-badge">JAVA 21</span></h1>
        <p class="subtitle">Interactive demonstration of Java 21 Pattern Matching for Switch with Sealed Payment Hierarchy</p>
    </div>
</div>

<div class="main-container">
    <div class="panel">
        <div class="panel-header">
            <span class="panel-icon">ğŸ›’</span>
            Order Summary
        </div>

        <div class="amount-selector">
            <button class="amount-btn" onclick="setAmount(500)" data-amount="500">$500</button>
            <button class="amount-btn" onclick="setAmount(1500)" data-amount="1500">$1.5K</button>
            <button class="amount-btn" onclick="setAmount(5000)" data-amount="5000">$5K</button>
        </div>

        <div id="order-items">
            <div class="order-item">
                <span>iPhone 15 Pro</span>
                <span>$999</span>
            </div>
            <div class="order-item">
                <span>AirPods Pro</span>
                <span>$249</span>
            </div>
        </div>

        <div class="total">
            <div class="order-item">
                <span>Total:</span>
                <span id="total-amount">$500</span>
            </div>
        </div>

        <div class="panel-header panel-header-spacing">
            <span class="panel-icon">ğŸ’³</span>
            Payment Method
        </div>

        <div class="payment-methods">
            <div class="payment-method selected" onclick="selectPaymentMethod('credit')" data-method="credit">
                <div class="payment-icon">ğŸ’³</div>
                <div class="payment-method-info">
                    <div class="payment-method-name">Credit Card</div>
                    <div class="payment-method-desc">Visa, MC, Amex</div>
                </div>
            </div>
            <div class="payment-method" onclick="selectPaymentMethod('paypal')" data-method="paypal">
                <div class="payment-icon">ğŸ“±</div>
                <div class="payment-method-info">
                    <div class="payment-method-name">PayPal</div>
                    <div class="payment-method-desc">Account</div>
                </div>
            </div>
            <div class="payment-method" onclick="selectPaymentMethod('bank')" data-method="bank">
                <div class="payment-icon">ğŸ›ï¸</div>
                <div class="payment-method-info">
                    <div class="payment-method-name">Bank Transfer</div>
                    <div class="payment-method-desc">Direct</div>
                </div>
            </div>
        </div>

        <div class="customer-type">
            <div class="customer-type-label">ğŸ‘¤ Customer Type</div>
            <div class="customer-tabs">
                <button class="customer-tab" onclick="selectCustomerType('basic')" data-type="basic">Basic</button>
                <button class="customer-tab" onclick="selectCustomerType('premium')" data-type="premium">Premium</button>
                <button class="customer-tab active" onclick="selectCustomerType('vip')" data-type="vip">VIP</button>
            </div>
        </div>

        <div class="checkbox-option">
            <input type="checkbox" id="international" onchange="toggleInternational()">
            <label for="international">International Transaction</label>
        </div>
        <div class="checkbox-hint">
            High amounts + international = verification
        </div>

        <button class="process-btn" onclick="processPayment()" id="processBtn">ğŸ”’ Process Payment - <span id="btn-amount">$500</span></button>
    </div>

    <div class="panel">
        <div class="panel-header">
            <span class="panel-icon">âš¡</span>
            Java 21 Pattern Matching
        </div>

        <h4 class="section-header">Pattern Matching Reference</h4>

        <div class="pattern-reference" id="pattern-reference">
            <div class="pattern-line" data-pattern="switch">
                <span class="keyword">switch</span> <span class="type">(payment)</span> <span class="comment">Pattern matching switch expression</span>
            </div>
            <div class="pattern-line" data-pattern="credit">
                <span class="keyword">case</span> <span class="type">CreditCard(...)</span> <span class="comment">Record pattern with destructuring</span>
            </div>
            <div class="pattern-line" data-pattern="paypal">
                <span class="keyword">case</span> <span class="type">PayPal(...)</span> <span class="comment">Alternative payment method pattern</span>
            </div>
            <div class="pattern-line" data-pattern="bank">
                <span class="keyword">case</span> <span class="type">BankTransfer(...)</span> <span class="comment">Bank transfer pattern matching</span>
            </div>
            <div class="pattern-line" data-pattern="guard">
                <span class="keyword">when</span> <span class="type">amount > 1000</span> <span class="comment">Guard condition for business rules</span>
            </div>
        </div>

        <div class="pattern-note">
            ğŸ’¡ Rows highlight to show the *actual* executed path.
        </div>

        <h4 class="section-header section-header-spaced">Current Pattern Status</h4>

        <div class="status-section" id="status-section">
            <div class="status-item">
                <div class="status-icon success">âœ“</div>
                <div class="status-content">
                    <h5 class="status-title">Payment Method Detection</h5>
                    <p id="payment-detection" class="status-text">Pattern: CreditCard identified</p>
                </div>
            </div>

            <div class="status-item">
                <div class="status-icon success">âœ“</div>
                <div class="status-content">
                    <h5 class="status-title">Guard Condition Check</h5>
                    <p id="guard-condition" class="status-text">Amount â‰¤ $1,000 â€” Standard processing</p>
                </div>
            </div>

            <div class="status-item">
                <div class="status-icon success">âœ“</div>
                <div class="status-content">
                    <h5 class="status-title">Validation</h5>
                    <p id="validation-status" class="status-text">Ready for processing</p>
                </div>
            </div>

            <div class="status-item">
                <div class="status-icon play">â–¶</div>
                <div class="status-content">
                    <h5 class="status-title">Payment Processing</h5>
                    <p id="processing-status" class="status-text">Click Process Payment to execute</p>
                </div>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="panel-header">
            <span class="panel-icon">ğŸ“Š</span>
            Visual Flow Inspector
            <button class="clear-log-btn" onclick="clearInspectorLog()">ğŸ—‘ï¸ Clear</button>
        </div>

        <div id="api-log" class="api-log-container" aria-live="polite">
            <div class="text-muted text-center py-2">Click Process Payment to see API calls...</div>
        </div>
    </div>
</div>

<script src="js/payment_processing.js"></script>
</body>
</html>